(this["webpackJsonpfizzy-beats"]=this["webpackJsonpfizzy-beats"]||[]).push([[0],[,,,,,,function(e){e.exports=JSON.parse('{"drumKits":[{"name":"808","samples":[{"name":"kick","url":"audio/808/808-kick-01.wav"},{"name":"snare","url":"audio/808/808-snare-01.wav"},{"name":"clap","url":"audio/808/808-clap-01.wav"},{"name":"hat","url":"audio/808/808-hat-01.wav"},{"name":"cymbal","url":"audio/808/808-cymbal-01.wav"},{"name":"clave","url":"audio/808/808-clave-01.wav"}]},{"name":"acoustic","samples":[{"name":"kick","url":"audio/acoustic/acoustic-kick.wav"},{"name":"snare","url":"audio/acoustic/acoustic-snare.wav"},{"name":"closed hat","url":"audio/acoustic/acoustic-cl-hat.wav"},{"name":"open hat","url":"audio/acoustic/acoustic-op-hat.wav"},{"name":"cymbal","url":"audio/acoustic/acoustic-cymbal.wav"},{"name":"tom","url":"audio/acoustic/acoustic-tom-0.wav"}]},{"name":"electro","samples":[{"name":"kick","url":"audio/electro/electro-kick.wav"},{"name":"snare","url":"audio/electro/electro-snare.wav"},{"name":"clap","url":"audio/electro/electro-clap.wav"},{"name":"hat","url":"audio/electro/electro-cl-hat.wav"},{"name":"fx","url":"audio/electro/electro-fx-2.wav"},{"name":"tom","url":"audio/electro/electro-tom-1.wav"}]},{"name":"vinyl","samples":[{"name":"kick","url":"audio/vinyl/vinyl-kick.wav"},{"name":"snare","url":"audio/vinyl/vinyl-snare.wav"},{"name":"closed hat","url":"audio/vinyl/vinyl-cl-hat.wav"},{"name":"open hat","url":"audio/vinyl/vinyl-op-hat.wav"},{"name":"cymbal","url":"audio/vinyl/vinyl-cymbal.wav"},{"name":"shaker","url":"audio/vinyl/vinyl-shaker.wav"}]}]}')},,,,,,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(8),i=a.n(r),c=(a(15),a(10)),l=a(9),o=a(2),u=a(3),p=a(5),d=a(4),h=(a(16),a(0)),m=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).handleChange=function(t){e.props.changeHandler(t.target.value)},e}return Object(u.a)(a,[{key:"render",value:function(){return Object(h.jsx)("div",{className:"component-num-stepper",children:Object(h.jsxs)("div",{className:"input-wrapper",children:[Object(h.jsx)("label",{children:this.props.label}),Object(h.jsx)("input",{type:"number",id:"bpm",name:"bpm",min:this.props.min,max:this.props.max,value:this.props.value,onChange:this.handleChange})]})})}}]),a}(s.a.Component),v=(a(18),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).handleClick=function(){e.props.handleClick(e.props.row,e.props.col,e.props.sampleBtn)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=["component-button",this.props.sampleBtn?"sample":"",this.props.selected?"selected":"",this.props.playing&&this.props.col===this.props.currentBeat?"playing ":""];return Object(h.jsx)("div",{className:e.join(" ").trim(),children:Object(h.jsx)("button",{onClick:this.handleClick,children:this.props.text})})}}]),a}(s.a.Component)),b=(a(19),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).handleClick=function(t){e.props.handleClick(t.target.innerText)},e}return Object(u.a)(a,[{key:"render",value:function(){for(var e=[],t=0;t<this.props.buttons;++t){var a=["group-button",this.props.selected===t?"selected":""];e.push(Object(h.jsx)("button",{className:a.join(" ").trim(),onClick:this.handleClick,children:t+1})),t!==this.props.buttons-1&&e.push(Object(h.jsx)("div",{className:"divider"}))}return Object(h.jsxs)("div",{className:"component-button-group",children:[Object(h.jsx)("label",{children:this.props.labelText}),Object(h.jsx)("div",{className:"buttons",children:e})]})}}]),a}(s.a.Component)),f=(a(20),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).handleChange=function(t){console.log(t.target.value),e.props.changeHandler(t.target.value)},e}return Object(u.a)(a,[{key:"render",value:function(){for(var e=[],t=0;t<this.props.names.length;t++)e.push(Object(h.jsx)("option",{value:this.props.names[t],children:this.props.names[t]}));return Object(h.jsxs)("div",{className:"component-dropdown-menu",children:[Object(h.jsx)("label",{children:this.props.label}),Object(h.jsx)("select",{onChange:this.handleChange,children:e})]})}}]),a}(s.a.Component)),j=a.p+"static/media/play.46a9bdd6.svg",y=a.p+"static/media/stop.b7dedbb2.svg",w=(a.p,a(6)),x=(a(21),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).playSample=function(e,t){var a=n.audioContext.createBufferSource();return a.buffer=e,a.connect(n.audioContext.destination),a.start(t),a},n.nextBeat=function(){var e=60/n.state.bpm/4;n.nextBeatTime+=e,n.currentBeat++,16===n.currentBeat&&(n.currentBeat=0)},n.scheduleBeat=function(e,t){n.queue.push({beat:e,time:t});for(var a=0;a<n.state.pads.length;a++)n.state.pads[a][e]&&"undefined"!=typeof n.state.samples[a]&&n.state.samples[a]&&n.playSample(n.state.samples[a].sample,t)},n.scheduler=function(){for(;n.nextBeatTime<n.audioContext.currentTime+n.scheduleAheadTime;)n.scheduleBeat(n.currentBeat,n.nextBeatTime),n.nextBeat();n.timerID=window.setTimeout(n.scheduler,n.lookAhead)},n.start=function(){"suspended"==n.audioContext.state&&n.audioContext.resume(),n.currentBeat=0,n.nextBeatTime=n.audioContext.currentTime,n.scheduler(),requestAnimationFrame(n.draw)},n.stop=function(){window.clearTimeout(n.timerID)},n.draw=function(){for(var e=n.lastBeatDrawn,t=n.audioContext.currentTime;n.queue.length&&n.queue[0].time<t;)e=n.queue[0].beat,n.queue.splice(0,1);n.lastBeatDrawn!==e&&(n.setState({drawBeat:e}),n.lastBeatDrawn=e),requestAnimationFrame(n.draw)},n.handleBPMChange=function(e){e>=40&&e<=240&&n.setState({bpm:e})},n.sequenceButtonHandler=function(e,t,a){if(a&&"undefined"!=typeof n.state.samples[e]&&n.state.samples[e])n.playSample(n.state.samples[e].sample,0);else{console.log("sequence button at row "+e+" col pushed");n.state.pads[e][t];n.togglePad(e,t)}},n.playButtonHandler=function(){n.setState({isPlaying:!n.state.isPlaying},(function(){n.state.isPlaying?n.start():n.stop()}))},n.buttonGroupHandler=function(e){n.setState({currentPattern:e-1},(function(){n.setState({pads:n.patterns[n.state.currentPattern]})}))},n.drumKitChangeHandler=function(e){n.setState({currentDrumKit:e},(function(){n.loadSamples()}))},n.patterns=[],n.queue=[],n.audioContext=new(window.AudioContext||window.webkitAudioContext),n.lookAhead=25,n.scheduleAheadTime=.1,n.timerID=null,n.currentBeat=0,n.nextBeatTime=0,n.lastBeatDrawn=15,n.state={bpm:100,isPlaying:!1,drawBeat:0,samples:[],currentPattern:0,currentDrumKit:"808",pads:[]},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.initializePatterns(),this.loadSamples()}},{key:"loadSamples",value:function(){var e=this;this.setState({samples:[]});for(var t=w.drumKits.map((function(e){return e.name})).indexOf(this.state.currentDrumKit),a=w.drumKits[t].samples,n=function(t){fetch(a[t].url).then((function(e){return e.arrayBuffer()})).then((function(n){return e.audioContext.decodeAudioData(n,(function(n){var s=Object(l.a)(e.state.samples),r=Object(c.a)({},s[t]);r={sample:n,name:a[t].name},s[t]=r,e.setState({samples:s})}))}))},s=0;s<a.length;s++)n(s)}},{key:"initializePads",value:function(e){for(var t=0;t<6;t++){for(var a=[],n=0;n<16;n++)a.push(0);e.push(a)}}},{key:"initializePatterns",value:function(){for(var e=0;e<8;e++){var t=[];this.initializePads(t),this.patterns.push(t)}this.setState({pads:this.patterns[0]})}},{key:"togglePad",value:function(e,t){var a=this;this.setState({pads:this.state.pads.map((function(n,s){return n.map((function(n,r){return s===e&&r===t?(a.patterns[a.state.currentPattern][s][r]=0===n?1:0,0===n?1:0):(a.patterns[a.state.currentPattern][s][r]=n,n)}))}))})}},{key:"renderButton",value:function(e,t){return t?Object(h.jsx)(v,{handleClick:this.sequenceButtonHandler,row:e,col:t-1,playing:this.state.isPlaying,selected:"undefined"!==typeof this.state.pads[e]&&1===this.state.pads[e][t-1],currentBeat:this.state.drawBeat}):Object(h.jsxs)("div",{className:"sampleBtn-container",children:[Object(h.jsx)("label",{className:"sampleBtn-label",children:"undefined"!==typeof this.state.samples[e]&&this.state.samples[e]?this.state.samples[e].name:""}),Object(h.jsx)(v,{handleClick:this.sequenceButtonHandler,row:e,sampleBtn:!0})]})}},{key:"renderRow",value:function(e){for(var t=[],a=0;a<17;a++)t.push(this.renderButton(e,a));return Object(h.jsx)("div",{children:t})}},{key:"render",value:function(){for(var e=[],t=0;t<6;t++)e.push(this.renderRow(t));for(var a=[],n=0;n<w.drumKits.length;n++)a.push(w.drumKits[n].name);return Object(h.jsx)("div",{className:"component-app",children:Object(h.jsxs)("div",{className:"content-wrapper",children:[Object(h.jsxs)("div",{className:"display-wrapper",children:[Object(h.jsxs)("div",{className:"first-col-wrapper",children:[Object(h.jsx)(f,{label:"drum kit",names:a,changeHandler:this.drumKitChangeHandler}),Object(h.jsx)(m,{value:""+this.state.bpm,label:"BPM",min:40,max:240,changeHandler:this.handleBPMChange,defaultVal:100})]}),Object(h.jsxs)("button",{className:"on-button"+(this.state.isPlaying?" playing":""),onClick:this.playButtonHandler,children:[Object(h.jsx)("span",{children:this.state.isPlaying?"Stop":"Play"}),Object(h.jsx)("img",{src:j,width:"12",height:"12",className:"play-icon"+(this.state.isPlaying?" playing":"")}),Object(h.jsx)("img",{src:y,width:"12",height:"12",className:"stop-icon"+(this.state.isPlaying?" playing":"")})]}),Object(h.jsx)("div",{children:Object(h.jsx)(b,{labelText:"patterns",selected:this.state.currentPattern,buttons:8,handleClick:this.buttonGroupHandler})})]}),Object(h.jsx)("div",{className:"button-panel",children:e})]})})}}]),a}(s.a.Component));i.a.render(Object(h.jsx)(x,{}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.2e82149c.chunk.js.map